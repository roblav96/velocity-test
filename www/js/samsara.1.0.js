!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Samsara=e():t.Samsara=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={exports:{},id:n,loaded:!1};return t[n].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){var n;n=function(t,e,n){n.exports={Core:i(1),DOM:i(32),Events:i(39),Inputs:i(40),Layouts:i(50),Streams:i(58),Transitions:i(59)}}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){n.exports={Engine:i(2),LayoutNode:i(8),SizeNode:i(17),Timer:i(20),Transform:i(21),Transitionable:i(22),View:i(26)}}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var s=i(3),o=i(4),r=i(5),a=i(6),u=i(7),h=0,c={};c.step=function(){for(;r.length;)r.shift()();s.set(s.STATES.UPDATE);for(var t=0;t<u.length;t++)u[t]();for(;o.length;)o.shift()();for(s.set(s.STATES.END);a.length;)a.shift()();s.set(s.STATES.START)},c.start=function p(){c.step(),h=window.requestAnimationFrame(p)},n.exports=c}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,i){var n={NONE:-1,START:0,UPDATE:1,END:2},s=n.START,o={};o.STATES=n,o.set=function(t){s=t},o.get=function(){return s},i.exports=o}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,i){i.exports=[]}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,i){i.exports=[]}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,i){i.exports=[]}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,i){i.exports=[]}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t){this.stream=o(t),r.setOutputHandler(this,this.stream)}function o(t){for(var e in t){var i=t[e];if("number"==typeof i||i instanceof Array){var n=new h(i);t[e]=n}}return u.merge(t)}var r=i(9),a=i(11),u=i(15),h=i(16);s.KEYS={transform:"transform",origin:"origin",align:"align",opacity:"opacity"},s.prototype.set=function(t){for(var e in t){var i=t[e],n=i instanceof a?i:new h(i);this.stream.addStream(e,n)}},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(){o.apply(this,arguments),this.upstream=[],this.upstreamListeners={}}var o=i(10);s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.setInputHandler=function(t,e){t.trigger=e.trigger.bind(e),t.subscribe=e.subscribe.bind(e),t.unsubscribe=e.unsubscribe.bind(e)},s.setOutputHandler=function(t,e){e.bindThis(t),t.emit=e.emit.bind(e),t.on=e.on.bind(e),t.off=e.off.bind(e)},s.setInputEvents=function(t,e,i){for(var n in e){var s=e[n],o="string"==typeof s?t[s]:s;o&&i.on(n,o.bind(t))}},s.prototype.on=function(t,e){if(o.prototype.on.apply(this,arguments),!(t in this.upstreamListeners)){var i=this.trigger.bind(this,t);this.upstreamListeners[t]=i;for(var n=0;n<this.upstream.length;n++)this.upstream[n].on(t,i)}},s.prototype.subscribe=function(t){var e=this.upstream.indexOf(t);if(0>e){this.upstream.push(t);for(var i in this.upstreamListeners)t.on(i,this.upstreamListeners[i])}return t},s.prototype.unsubscribe=function(t){var e=this.upstream.indexOf(t);if(e>=0){this.upstream.splice(e,1);for(var i in this.upstreamListeners)t.off(i,this.upstreamListeners[i])}return t},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,i){function n(){this.listeners={},this._owner=this}n.prototype.emit=function(t,e){if(e!==!1){var i=this.listeners[t];if(i)for(var n=0;n<i.length;n++)i[n].call(this._owner,e)}},n.prototype.trigger=n.prototype.emit,n.prototype.on=function(t,e){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push(e)},n.prototype.once=function(t,e){var i=function(){e.apply(this,arguments),n.prototype.off.call(this,t,i)}.bind(this);this.on(t,i)},n.prototype.off=function(t,e){if(!t)return void(this.listeners={});var i=this.listeners[t];if(void 0!==i)if(e){var n=i.indexOf(e);n>=0&&i.splice(n,1)}else this.listeners[t]=[]},n.prototype.bindThis=function(t){this._owner=t},i.exports=n}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(){o.call(this)}var o=i(9),r=i(12),a=i(13),u=i(14);s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.map=function(t){var e=new s,i=new r(t);return e.subscribe(i).subscribe(this),e},s.prototype.filter=function(t){var e=new a(t),i=new s;return i.subscribe(e).subscribe(this),i},s.prototype.split=function(t){var e=new u(t),i=new s;return i.subscribe(e).subscribe(this),i},s.prototype.pluck=function(t){return this.map(function(e){return e[t]})},s.merge=function(){},s.lift=function(t,e){var i=e instanceof Array?this.merge(e):this.merge.apply(null,Array.prototype.splice.call(arguments,1)),n=new r(function(e){return t.apply(null,e)}),o=new s;return o.subscribe(n).subscribe(i),o},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t){o.call(this),this._mappingFunction=t}var o=i(9);s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.emit=function(t,e){var i=this._mappingFunction(e);o.prototype.emit.call(this,t,i)},s.prototype.trigger=s.prototype.emit,n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t){o.call(this),this._condition=t}var o=i(9);s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.emit=function(t,e){this._condition(t,e)&&o.prototype.emit.apply(this,arguments)},s.prototype.trigger=s.prototype.emit,n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t){o.call(this),this._splitter=t}var o=i(9);s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.emit=function(t,e){var i=this._splitter.apply(this,arguments);i&&i.emit instanceof Function&&i.emit(t,e)},s.prototype.trigger=s.prototype.emit,n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t){function e(e){var i=t&&t.start?t.start(e):e;i!==!1&&this.emit(l.START,i),a=!1}function i(e){var i=t&&t.update?t.update(e):e;i!==!1&&this.emit(l.UPDATE,i)}function n(e){var i=t&&t.end?t.end(e):e;i!==!1&&this.emit(l.END,i),f=!1}this._eventInput=new o,this._eventOutput=new o,o.setInputHandler(this,this._eventInput),o.setOutputHandler(this,this._eventOutput);var s=0,r=!1,a=!1,f=!1;this._eventInput.on(l.START,function(t){return s++,a||r?!1:(a=!0,void u.push(e.bind(this,t)))}.bind(this)),this._eventInput.on(l.UPDATE,function(t){r=!0,h.push(i.bind(this,t))}.bind(this)),this._eventInput.on(l.END,function(t){return s--,r&&s>0?(i.call(this,t),!1):(r=!1,void(f||(f=!0,c.push(n.bind(this,t)))))}.bind(this)),this._eventInput.on(l.RESIZE,function(t){switch(p.get()){case p.STATES.START:this.trigger(l.START,t);break;case p.STATES.UPDATE:this.trigger(l.UPDATE,t);break;case p.STATES.END:this.trigger(l.END,t)}}.bind(this))}var o=i(9),r=i(12),a=i(11),u=i(5),h=i(4),c=i(6),p=i(3),l={START:"start",UPDATE:"update",END:"end",RESIZE:"resize"};s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.lift=a.lift,s.merge=function(t){var e=new s,i=t instanceof Array?[]:{};e.addStream=function(t,n){var s=function(t){return new r(function(e){return i[t]=e,i})}(t);e.subscribe(s).subscribe(n)};for(var n in t){var o=t[n];e.addStream(n,o)}return e},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t){o.call(this),this.value=t,void 0!==t&&this.set(t)}var o=i(11),r=i(5),a=i(6);s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.get=function(){return this.value},s.prototype.set=function(t){var e=this;r.push(function(){e.value=t,e.emit("start",t),a.push(function(){e.emit("end",t)})})},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t){this.stream=o(t),r.setOutputHandler(this,this.stream),this.stream._eventInput.on("start",function(t){this.stream.trigger("resize",t)}.bind(this)),this.stream._eventInput.on("update",function(t){this.stream.trigger("resize",t)}.bind(this)),this.stream._eventInput.on("end",function(t){this.stream.trigger("resize",t)}.bind(this))}function o(t){for(var e in t){var i=t[e];if("number"==typeof i||i instanceof Array){var n=new h(i);t[e]=n}}return u.merge(t)}var r=i(9),a=i(11),u=i(18),h=i(19);s.KEYS={size:"size",proportions:"proportions",margins:"margins",aspectRatio:"aspectRatio"},s.prototype.set=function(t){for(var e in t){var i=t[e],n=i instanceof a?i:new h(i);this.stream.addStream(e,n)}},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t){function e(e){var n=t&&t.resize?t.resize(e):e;this.emit(l.RESIZE,n),i=!1}var i=!1;this._eventInput=new a,this._eventOutput=new a,a.setInputHandler(this,this._eventInput),a.setOutputHandler(this,this._eventOutput),this._eventInput.on(l.RESIZE,function(t){if(!i){var n;switch(p.get()){case p.STATES.START:n=u;break;case p.STATES.UPDATE:n=h;break;case p.STATES.END:n=c}n.push(e.bind(this,t))}i=!0}.bind(this))}var o=i(11),r=i(12),a=i(9),u=i(5),h=i(4),c=i(6),p=i(3),l={RESIZE:"resize"};s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.lift=o.lift,s.merge=function(t){var e=new s,i=t instanceof Array?[]:{};e.addStream=function(t,n){var s=function(t){return new r(function(e){return i[t]=e,i})}(t);e.subscribe(s).subscribe(n)};for(var n in t){var o=t[n];e.addStream(n,o)}return e},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t){o.call(this),this.value=t,void 0!==t&&this.set(t)}var o=i(11),r=i(5),a=i(6);s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.get=function(){return this.value},s.prototype.set=function(t){var e=this;r.push(function(){e.value=t,e.emit("resize",t),a.push(function(){e.emit("resize",t)})})},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t){return r.push(t),t}function o(t){var e=r.indexOf(t);-1!==e&&r.splice(e,1)}var r=i(7),a={},u=window.performance?function(){return window.performance.now()}:Date.now;a.setTimeout=function(t,e){var i=u(),n=function(){var s=u();s-i>=e&&(t.apply(this,arguments),a.clear(n))};return s(n)},a.setInterval=function(t,e){var i=u(),n=function(){var n=u();n-i>=e&&(t.apply(this,arguments),i=u())};return s(n)},a.after=function(t,e){if(void 0===e)return void 0;var i=function(){e--,0>=e&&(t.apply(this,arguments),a.clear(i))};return s(i)},a.every=function(t,e){e=e||1;var i=e,n=function(){e--,0>=e&&(t.apply(this,arguments),e=i)};return s(n)},a.clear=function(t){o(t)},a.debounce=function(t,e){var i;return function(){var n=arguments,s=function(){a.clear(i),i=null,t.apply(this,n)}.bind(this);i&&a.clear(i),i=a.setTimeout(s,e)}},a.frameDebounce=function(t,e){var i;return function(){var n=arguments,s=function(){i=null,t.apply(this,n)}.bind(this);i&&a.clear(i),i=a.after(s,e)}},n.exports=a}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,i){function n(t){return 2===t.length?t[0]*t[0]+t[1]*t[1]:t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function s(t){return Math.sqrt(n(t))}function o(t){return 0>t?-1:1}var r={};r.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.inFront=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,1.001,1],r.behind=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,-1.001,1],r.compose=function(t,e){return t===r.identity?e.slice():e===r.identity?t.slice():[t[0]*e[0]+t[4]*e[1]+t[8]*e[2],t[1]*e[0]+t[5]*e[1]+t[9]*e[2],t[2]*e[0]+t[6]*e[1]+t[10]*e[2],0,t[0]*e[4]+t[4]*e[5]+t[8]*e[6],t[1]*e[4]+t[5]*e[5]+t[9]*e[6],t[2]*e[4]+t[6]*e[5]+t[10]*e[6],0,t[0]*e[8]+t[4]*e[9]+t[8]*e[10],t[1]*e[8]+t[5]*e[9]+t[9]*e[10],t[2]*e[8]+t[6]*e[9]+t[10]*e[10],0,t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14],1]},r.composeMany=function(){if(arguments.length>2){var t=arguments[0],e=arguments[1];return Array.prototype.shift.call(arguments),arguments[0]=r.compose(t,e),r.composeMany.apply(null,arguments)}return r.compose.apply(null,arguments)},r.thenMove=function(t,e){return e[2]||(e[2]=0),[t[0],t[1],t[2],0,t[4],t[5],t[6],0,t[8],t[9],t[10],0,t[12]+e[0],t[13]+e[1],t[14]+e[2],1]},r.moveThen=function(t,e){t[2]||(t[2]=0);var i=t[0]*e[0]+t[1]*e[4]+t[2]*e[8],n=t[0]*e[1]+t[1]*e[5]+t[2]*e[9],s=t[0]*e[2]+t[1]*e[6]+t[2]*e[10];return r.thenMove(e,[i,n,s])},r.translate=function(t){var e=t[0]||0,i=t[1]||0,n=t[2]||0;return[1,0,0,0,0,1,0,0,0,0,1,0,e,i,n,1]},r.translateX=function(t){return[1,0,0,0,0,1,0,0,0,0,1,0,t,0,0,1]},r.translateY=function(t){return[1,0,0,0,0,1,0,0,0,0,1,0,0,t,0,1]},r.translateZ=function(t){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,t,1]},r.scale=function(t){var e=void 0!==t[0]?t[0]:1,i=void 0!==t[1]?t[1]:1,n=void 0!==t[2]?t[2]:1;return[e,0,0,0,0,i,0,0,0,0,n,0,0,0,0,1]},r.scaleX=function(t){return[1,0,0,0,0,1,0,0,0,0,1,0,t,0,0,1]},r.scaleY=function(t){return[1,0,0,0,0,1,0,0,0,0,1,0,0,t,0,1]},r.scaleZ=function(t){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,t,1]},r.thenScale=function(t,e){var i=void 0!==e[0]?e[0]:1,n=void 0!==e[1]?e[1]:1,s=void 0!==e[2]?e[2]:1;return[i*t[0],n*t[1],s*t[2],0,i*t[4],n*t[5],s*t[6],0,i*t[8],n*t[9],s*t[10],0,i*t[12],n*t[13],s*t[14],1]},r.rotateX=function(t){var e=Math.cos(t),i=Math.sin(t);return[1,0,0,0,0,e,i,0,0,-i,e,0,0,0,0,1]},r.rotateY=function(t){var e=Math.cos(t),i=Math.sin(t);return[e,0,-i,0,0,1,0,0,i,0,e,0,0,0,0,1]},r.rotateZ=function(t){var e=Math.cos(t),i=Math.sin(t);return[e,i,0,0,-i,e,0,0,0,0,1,0,0,0,0,1]},r.skewX=function(t){return[1,0,0,0,Math.tan(t),1,0,0,0,0,1,0,0,0,0,1]},r.skewY=function(t){return[1,Math.tan(t),0,0,0,1,0,0,0,0,1,0,0,0,0,1]},r.rotateAxis=function(t,e){var i=Math.sin(e),n=1-Math.cos(e),s=1-n,o=t[0]*t[0]*s,r=t[0]*t[1]*s,a=t[0]*t[2]*s,u=t[1]*t[1]*s,h=t[1]*t[2]*s,c=t[2]*t[2]*s,p=t[0]*i,l=t[1]*i,f=t[2]*i;return[o+n,r+f,a-l,0,r-f,u+n,h+p,0,a+l,h-p,c+n,0,0,0,0,1]},r.aboutOrigin=function(t,e){t[2]=t[2]||0;var i=t[0]-(t[0]*e[0]+t[1]*e[4]+t[2]*e[8]),n=t[1]-(t[0]*e[1]+t[1]*e[5]+t[2]*e[9]),s=t[2]-(t[0]*e[2]+t[1]*e[6]+t[2]*e[10]);return r.thenMove(e,[i,n,s])},r.perspective=function(t){return[1,0,0,0,0,1,0,0,0,0,1,-1/t,0,0,0,1]},r.getTranslate=function(t){return[t[12],t[13],t[14]]},r.inverse=function(t){var e=t[5]*t[10]-t[6]*t[9],i=t[4]*t[10]-t[6]*t[8],n=t[4]*t[9]-t[5]*t[8],s=t[1]*t[10]-t[2]*t[9],o=t[0]*t[10]-t[2]*t[8],r=t[0]*t[9]-t[1]*t[8],a=t[1]*t[6]-t[2]*t[5],u=t[0]*t[6]-t[2]*t[4],h=t[0]*t[5]-t[1]*t[4],c=t[0]*e-t[1]*i+t[2]*n,p=1/c,l=[p*e,-p*s,p*a,0,-p*i,p*o,-p*u,0,p*n,-p*r,p*h,0,0,0,0,1];return l[12]=-t[12]*l[0]-t[13]*l[4]-t[14]*l[8],l[13]=-t[12]*l[1]-t[13]*l[5]-t[14]*l[9],l[14]=-t[12]*l[2]-t[13]*l[6]-t[14]*l[10],l},r.transpose=function(t){return[t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]},r.interpret=function(t){var e=[t[0],t[1],t[2]],i=o(e[0]),a=s(e),u=[e[0]+i*a,e[1],e[2]],h=2/n(u);if(h>=1/0)return{translate:r.getTranslate(t),rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]};var c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];c[0]=1-h*u[0]*u[0],c[5]=1-h*u[1]*u[1],c[10]=1-h*u[2]*u[2],c[1]=-h*u[0]*u[1],c[2]=-h*u[0]*u[2],c[6]=-h*u[1]*u[2],c[4]=c[1],c[8]=c[2],c[9]=c[6];var p=r.compose(c,t),l=[p[5],p[6]],f=o(l[0]),v=s(l),d=[l[0]+f*v,l[1]],y=2/n(d),_=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];_[5]=1-y*d[0]*d[0],_[10]=1-y*d[1]*d[1],_[6]=-y*d[0]*d[1],_[9]=_[6];var m=r.compose(_,c),g=r.compose(m,t),b=r.scale(g[0]<0?-1:1,g[5]<0?-1:1,g[10]<0?-1:1);g=r.compose(g,b),m=r.compose(b,m);var O={};return O.translate=r.getTranslate(t),O.rotate=[Math.atan2(-m[6],m[10]),Math.asin(m[2]),Math.atan2(-m[1],m[0])],O.rotate[0]||(O.rotate[0]=0,O.rotate[2]=Math.atan2(m[4],m[5])),O.scale=[g[0],g[5],g[10]],O.skew=[Math.atan2(g[9],O.scale[2]),Math.atan2(g[8],O.scale[2]),Math.atan2(g[4],O.scale[0])],Math.abs(O.rotate[0])+Math.abs(O.rotate[2])>1.5*Math.PI&&(O.rotate[1]=Math.PI-O.rotate[1],O.rotate[1]>Math.PI&&(O.rotate[1]-=2*Math.PI),O.rotate[1]<-Math.PI&&(O.rotate[1]+=2*Math.PI),O.rotate[0]<0?O.rotate[0]+=Math.PI:O.rotate[0]-=Math.PI,O.rotate[2]<0?O.rotate[2]+=Math.PI:O.rotate[2]-=Math.PI),O},r.build=function(t){var e=r.scale(t.scale[0],t.scale[1],t.scale[2]),i=r.skew(t.skew[0],t.skew[1],t.skew[2]),n=r.rotate(t.rotate[0],t.rotate[1],t.rotate[2]);return r.thenMove(r.compose(r.compose(n,i),e),t.translate)},r.average=function(t,e,i){i=void 0===i?.5:i;for(var n=r.interpret(t),s=r.interpret(e),o={translate:[0,0,0],rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]},a=0;3>a;a++)o.translate[a]=(1-i)*n.translate[a]+i*s.translate[a],o.rotate[a]=(1-i)*n.rotate[a]+i*s.rotate[a],o.scale[a]=(1-i)*n.scale[a]+i*s.scale[a],o.skew[a]=(1-i)*n.skew[a]+i*s.skew[a];return r.build(o)},r.equals=function(t,e){return!r.notEquals(t,e)},r.notEquals=function(t,e){return t===e?!1:!(t&&e)||t[12]!==e[12]||t[13]!==e[13]||t[14]!==e[14]||t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[4]!==e[4]||t[5]!==e[5]||t[6]!==e[6]||t[8]!==e[8]||t[9]!==e[9]||t[10]!==e[10]},i.exports=r}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t){this.value=t||0,this.velocity=0,this._callback=void 0,this._method=null,this._active=!1,this._currentActive=!1;var e=!1;this.updateMethod=void 0,this._eventInput=new h,this._eventOutput=new h,h.setInputHandler(this,this._eventInput),h.setOutputHandler(this,this._eventOutput),this._eventInput.on("start",function(t){this._currentActive=!0,this._active||(this.emit("start",t),this._active=!0)}.bind(this)),this._eventInput.on("update",function(t){e=!0,this.value=t,this.velocity=this._engineInstance.getVelocity(),this.emit("update",t)}.bind(this)),this._eventInput.on("end",function(t){if(this.value=t,this._currentActive=!1,this._callback){var i=this._callback;this._callback=void 0,i()}this._currentActive||(this._active=!1,e=!1,this._engineInstance&&(this.velocity=this._engineInstance.getVelocity()),this._active=!1,this.emit("end",t))}.bind(this)),void 0!==t&&(this.value=t,a.push(function(){this.trigger("start",t),r.push(function(){e||this.trigger("end",t)}.bind(this))}.bind(this)))}function o(t,e){this._eventOutput=new h,h.setOutputHandler(this,this._eventOutput),this.sources=[];for(var i=0;i<t.length;i++){var n=new e(t[i]);this.sources.push(n)}this.stream=p.merge(this.sources),this._eventOutput.subscribe(this.stream)}var r=i(6),a=i(5),u=i(7),h=i(9),c=i(11),p=i(15),l=i(23),f=i(24),v=i(25),d={tween:l,spring:f,inertia:v};s.prototype=Object.create(c.prototype),s.prototype.constructor=s,s.register=function(t,e){t in d||(d[t]=e)},s.unregister=function(t){return t in d?(delete d[t],!0):!1},s.prototype.set=function(t,e,i){if(!e)return this.value=t,this.trigger("start",t),void r.push(function(){this.trigger("end",t)}.bind(this));i&&(this._callback=i);var n=e.curve,s=n&&d[n]?d[n]:l;if(this._method!==s){if(this._engineInstance){if(this.updateMethod){var a=u.indexOf(this.updateMethod);a>=0&&u.splice(a,1)}this.unsubscribe(this._engineInstance)}if(this.value instanceof Array){var h=this.value.length;this._engineInstance=h<s.DIMENSIONS?new s(this.value):new o(this.value,s)}else this._engineInstance=new s(this.value);this.subscribe(this._engineInstance),this.updateMethod=this._engineInstance.update.bind(this._engineInstance),u.push(this.updateMethod),this._method=s}e.velocity||(e.velocity=this.velocity),this._engineInstance.set(t,e)},s.prototype.get=function(){return this.value},s.prototype.getVelocity=function(){return this.velocity},s.prototype.reset=function(t,e){this.value=t,this.velocity=e||0,this._callback=null,this._method=null,this._engineInstance&&this._engineInstance.reset(t,e)},s.prototype.halt=function(){this.reset(this.get()),this.trigger("end",this.value)},s.prototype.isActive=function(){return this._active},s.prototype.iterate=function(t,e,i){if(0===t.length)return void(i&&i());var n=e instanceof Array?e.shift():e;this.set(t.shift(),n,function(){this.iterate(t,e,i)}.bind(this))},s.prototype.setMany=function(t){var e=t.shift();0===t.length?this.set(e.value,e.transition,e.callback):this.set(e.value,e.transition,function(){this.setMany(t)}.bind(this))},s.prototype.loop=function(t){var e=t.slice(0);this.setMany(t,function(){this.loop(e)}.bind(this))},s.prototype.delay=function(t,e){this.set(this.get(),{duration:e,curve:function(){return 0}},t)},o.prototype.set=function(t,e){for(var i=0;i<t.length;i++)this.sources[i].set(t[i],e)},o.prototype.getVelocity=function(){for(var t=[],e=0;e<this.sources.length;e++)t[e]=this.sources[e].getVelocity();return t},o.prototype.update=function(){for(var t=0;t<this.sources.length;t++)this.sources[t].update()},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t){p.call(this),this.state=t||0,this.velocity=0,this._startValue=t||0,this._endValue=0,this._startTime=l(),this._curve=void 0,this._duration=0,this._active=!1,this._eventOutput=new c,c.setOutputHandler(this,this._eventOutput)}function o(t){var e=v[t];if(void 0!==e)return e;throw new Error("curve not registered")}function r(t,e,i){var n;if(t instanceof Array){n=[];for(var s=0;s<t.length;s++)n.push("number"==typeof t[s]?a(t[s],e[s],i):t[s])}else n=a(t,e,i);return n}function a(t,e,i){return(1-i)*t+i*e}function u(t,e,i,n,s){return(t-e)*(i(s+f)-i(s-f))/(2*f*n)}function h(t,e,i,n,s){var o;if(t instanceof Array){o=[];for(var r=0;r<t.length;r++)o.push("number"==typeof t[r]?u(t[r],e[r],i,n,s):t[r])}else o=u(t,e,i,n,s);return o}var c=i(9),p=i(11),l=Date.now,f=1e-9,v={};s.prototype=Object.create(p.prototype),s.prototype.constructor=s,s.CURVES={linear:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return t*(2-t)},easeInOut:function(t){return.5>=t?2*t*t:-2*t*t+4*t-1},easeOutBounce:function(t){return t*(3-2*t)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1+Math.pow(t-1,3)},easeInOutCubic:function(t){return t*=2,1>t?.5*t*t*t:.5*Math.pow(t-2,3)+1},easeOutWall:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},s.DIMENSIONS=1/0,s.DEFAULT_OPTIONS={curve:s.CURVES.linear,duration:500},s.register=function(t,e){return v[t]?!1:(v[t]=e,!0)},s.deregister=function(t){return v[t]?(delete v[t],!0):!1},s.getCurves=function(){return v},s.prototype.set=function(t,e){this._startValue=this.get(),this._active||(this.emit("start",this._startValue),this._active=!0),this._endValue=t,this._startTime=l();var i=e.curve;!v[i]&&s.CURVES[i]&&s.register(i,s.CURVES[i]),this.velocity=e.velocity,this._duration=e.duration||s.DEFAULT_OPTIONS.duration,this._curve=i?i instanceof Function?i:o(i):s.DEFAULT_OPTIONS.curve},s.prototype.get=function(){return this.state},s.prototype.getVelocity=function(){return this.velocity},s.prototype.reset=function(t,e){this.state=t,this.velocity=e||0},s.prototype.halt=function(){var t=this.get();this.reset(t),this._active=!1,this.emit("end",t)},s.prototype.update=function(){if(this._active){var t=l()-this._startTime;if(this.velocity=h(this.state,this._startValue,this._curve,this._duration,1),t<this._duration){var e=t/this._duration;this.state=r(this._startValue,this._endValue,this._curve(e)),this.emit("update",this.state)}else this.emit("update",this._endValue),this.reset(this._endValue),this._active=!1,this.emit("end",this._endValue)}},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t,e){l.call(this),this.value=t||0,this.velocity=e||0,this.target=null,this.startTime=f(),this.curve=null,this.energy=null,this.energyTolerance=d,this._active=!1,this._eventOutput=new p,p.setOutputHandler(this,this._eventOutput)}function o(t,e){return Math.max(1,Math.abs(e-t))}function r(t,e,i,n,s){return 1>t?u(t,e,i,n,s):1===t?h(t,e,i,n,s):c(t,e,i,n,s)}function a(t){var e=2*Math.PI/t;return function(t,i,n){var s=t-i,o=e*e*s*s,r=n*n;return r+o}}function u(t,e,i,n,s){var o=Math.sqrt(1-t*t)/e,r=i-n,a=(t/e*r+s)/o;return function(i){return n+Math.exp(-t*i/e)*(r*Math.cos(o*i)+a*Math.sin(o*i))}}function h(t,e,i,n,s){var o=i-n,r=s+o/e;return function(i){return n+Math.exp(-t*i/e)*(o+r*i)}}function c(t,e,i,n,s){var o=Math.sqrt(t*t-1)/e,r=-t/e+o,a=-t/e-o,u=i-n,h=(r*u-s)/(a-r),c=u+h,p=-h;return function(t){return n+c*Math.exp(r*t)+p*Math.exp(a*t)}}var p=i(9),l=i(11),f=Date.now,v=1e-6,d=1e-9;s.DIMENSIONS=1,s.DEFAULT_OPTIONS={velocity:0,damping:.5,period:100},s.prototype=Object.create(l.prototype),s.prototype.constructor=s,s.prototype.set=function(t,e){var i=this.get();this._active||(this.emit("start",i),this._active=!0);var n=e.damping||s.DEFAULT_OPTIONS.damping,u=e.period||s.DEFAULT_OPTIONS.period,h=e.velocity||this.velocity;this.curve=r(n,u,i,t,h),this.energy=a(u);var c=o(t,i);this.energyTolerance=d*Math.pow(c,2),this.target=t,this.startTime=f()},s.prototype.get=function(){return this.value},s.prototype.getVelocity=function(){return this.velocity},s.prototype.reset=function(t,e){this.value=t,this.velocity=e||0},s.prototype.halt=function(){var t=this.get();this.reset(t),this._active=!1,this.emit("end",t)},s.prototype.update=function(){if(this._active){var t=f()-this.startTime,e=this.curve(t),i=this.curve(t+v),n=this.curve(t-v);this.velocity=(i-n)/(2*v);var s=this.energy(this.target,e,this.velocity);s>=this.energyTolerance?(this.value=e,this.emit("update",e)):(this.emit("update",this.target),this.reset(this.target),this._active=!1,this.emit("end",this.target))}},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t,e){r.call(this),this.value=t||0,this.velocity=e||0,this.damping=0,this.energy=null,this._active=!1,this._previousTime=a(),this._eventOutput=new o,o.setOutputHandler(this,this._eventOutput)}var o=i(9),r=i(11),a=Date.now,u=.01;s.DIMENSIONS=1,s.DEFAULT_OPTIONS={velocity:0,damping:.1},s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.prototype.set=function(t,e){this._active||(this.emit("start",t),this._active=!0),this.value=t,this.damping=void 0==e.damping?s.DEFAULT_OPTIONS.damping:Math.pow(Math.min(e.damping,1),3),this.velocity=e.velocity||this.velocity},s.prototype.get=function(){return this.value},s.prototype.getVelocity=function(){return this.velocity},s.prototype.reset=function(t,e){this.value=t},s.prototype.halt=function(){var t=this.get();this.reset(t),this._active=!1,this.emit("end",t)},s.prototype.update=function(){if(this._active){var t=a(),e=t-this._previousTime;this._previousTime=t,this.velocity*=1-this.damping,this.value+=e*this.velocity;var i=.5*this.velocity*this.velocity;i>=u?this.emit("update",this.value):(this.emit("update",this.value),this.reset(this.value),this._active=!1,this.emit("end",this.value))}},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t){for(var e in t){var i=t[e];switch(e){case"size":this.setSize(i);break;case"proportions":this.setProportions(i);break;case"origin":this.setOrigin(i);break;case"opacity":this.setOpacity(i)}}}var o=i(27),r=i(30),a=i(17),u=i(8),h=(i(22),i(9)),c=i(15),p=i(18),l=(i(19),i(28)),f=i(29),v=r.extend({_isView:!0,defaults:{size:null,origin:null,opacity:1},events:{change:s},constructor:function(t){this._size=new h,this._layout=new h,this._sizeNode=new a,this._layoutNode=new u,this._node=new o,this._node.tempRoot=this._node,this.size=p.lift(function(t,e){return e?t?f(t,e):e:!1},[this._sizeNode,this._size]),this._cachedSize=[0,0],this.size.on("resize",function(t){this._cachedSize=t}.bind(this));var e=c.lift(function(t,e,i){return t&&i?e?l(e,t,i):t:!1}.bind(this),[this._layout,this._layoutNode,this.size]);this._node._size.subscribe(this.size),this._node._layout.subscribe(e),r.apply(this,arguments),this.options&&s.call(this,this.options)},add:function(){return o.prototype.add.apply(this._node,arguments)},getSize:function(){return this._cachedSize},setSize:function(t){this._sizeNode.set({size:t})},setProportions:function(t){this._sizeNode.set({proportions:t})},setOrigin:function(t){this._layoutNode.set({origin:t})},setOpacity:function(t){this._layoutNode.set({opacity:t})}});n.exports=v}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t){this._layout=new u,this._size=new u,this.size=null,this.layout=null,this.root=null,t&&a.call(this,t)}function o(t){var e={},i={};for(var n in t)d[n]?e[n]=t[n]:y[n]&&(i[n]=t[n]);var s=this,o=Object.keys(e).length>0,r=Object.keys(i).length>0;if(o&&i.align){var a=new l({align:i.align});delete i.align,s=s.add(a)}return o&&(s=s.add(new p(e))),r&&(s=s.add(new l(i))),s}function r(){return this.root?this.root:this.tempRoot?r.call(this.tempRoot):this}function a(t){return t instanceof p?void(this.size=c.lift(function(t,e){return e?t?v(t,e):e:!1},[t,this._size])):t instanceof l?void(this.layout=h.lift(function(t,e,i){return e&&i?t?f(t,e,i):e:!1},[t,this._layout,this._size])):(t._size.subscribe(this._size),t._layout.subscribe(this._layout),void(t._getRoot=r.bind(this)))}var u=i(9),h=i(15),c=i(18),p=i(17),l=i(8),f=i(28),v=i(29),d=p.KEYS,y=l.KEYS;s.prototype.add=function(t){var e;return t.constructor===Object?o.call(this,t):(t._isView?(this.root?t._node.root=this.root:this.tempRoot&&(t._node.tempRoot=this.tempRoot),e=t):(e=new s(t),this.tempRoot?e.tempRoot=this.tempRoot:e.root=r.call(this)),e._layout.subscribe(this.layout||this._layout),e._size.subscribe(this.size||this._size),e)},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t,e,i){var n=void 0!==e.opacity?e.opacity:a.OPACITY,s=e.transform||a.TRANSFORM,u=t.origin||a.ORIGIN,h=t.align||a.ALIGN,c=void 0!==t.opacity?n*t.opacity:n,p=t.transform?r.compose(s,t.transform):s,l=t.origin?s:e.nextSizeTransform||s;if(t.size&&(l=s),u&&(u[0]||u[1])){var f="number"==typeof i[0]?-u[0]*i[0]:0,v="number"==typeof i[1]?-u[1]*i[1]:0;p=r.moveThen([f,v,0],p),u=null}if(i&&h&&(h[0]||h[1])){var d=o([h[0]*i[0],h[1]*i[1],0],l);p=r.thenMove(p,d),h=null}return{transform:p,opacity:c,origin:u,align:h,nextSizeTransform:l}}function o(t,e){return[t[0]*e[0]+t[1]*e[4]+t[2]*e[8],t[0]*e[1]+t[1]*e[5]+t[2]*e[9],t[0]*e[2]+t[1]*e[6]+t[2]*e[10]]}var r=i(21),a={OPACITY:1,TRANSFORM:r.identity,ORIGIN:null,ALIGN:null};n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,i){function n(t,e){if(!t)return e;var i=new Array(2);return t.size&&(void 0===t.size[0]&&(i[0]=e[0]),void 0===t.size[1]&&(i[1]=e[1]),"number"==typeof t.size[0]&&(i[0]=t.size[0]),"number"==typeof t.size[1]&&(i[1]=t.size[1]),t.size[0]===!0&&(i[0]=!0),t.size[1]===!0&&(i[1]=!0)),t.margins&&(i[0]=e[0]-2*t.margins[0],i[1]=e[1]-2*t.margins[1]),t.proportions&&("number"==typeof t.proportions[0]&&(i[0]=t.proportions[0]*e[0]),"number"==typeof t.proportions[1]&&(i[1]=t.proportions[1]*e[1])),t.aspectRatio&&("number"==typeof i[0]?i[1]=t.aspectRatio*i[0]:"number"==typeof i[1]&&(i[0]=t.aspectRatio*i[1])),void 0===i[0]&&(i[0]=e[0]),void 0===i[1]&&(i[1]=e[1]),i}i.exports=n}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t){this.options=o(this.constructor.DEFAULT_OPTIONS||s.DEFAULT_OPTIONS),this._optionsManager=new a(this.options),t&&this.setOptions(t),this.input=new h,this.output=new h,u.setInputHandler(this,this.input),u.setOutputHandler(this,this.output),u.setInputEvents(this,this.constructor.EVENTS||s.EVENTS,this.input),this.input.bindThis(this),this.input.subscribe(this._optionsManager),this.initialize&&this.initialize(this.options)}function o(t){var e;if("object"==typeof t){e=t instanceof Array?[]:{};for(var i in t){var n=t[i];if("object"==typeof n&&null!==n)if(n instanceof Array){e[i]=[];for(var s=0;s<n.length;s++)e[i][s]=o(n[s])}else e[i]=o(n);else e[i]=n}}else e=t;return e}function r(t,e){var i=this,n=t.hasOwnProperty("constructor")?function(){t.constructor.apply(this,arguments)}:function(){i.apply(this,arguments)};n.extend=r,n.prototype=Object.create(i.prototype),
n.prototype.constructor=n;for(var s in t){var o=t[s];switch(s){case c.DEFAULTS:n.DEFAULT_OPTIONS=o;break;case c.EVENTS:if(n.EVENTS)for(var s in o)n.EVENTS[s]=o[s];else n.EVENTS=o;break;default:n.prototype[s]=o}}for(var s in e)n[s]=e[s];return n}var a=i(31),u=i(9),h=i(11);s.DEFAULT_OPTIONS={},s.EVENTS={},s.prototype.getOptions=function(t){return a.prototype.getOptions.apply(this._optionsManager,arguments)},s.prototype.setOptions=function(){a.prototype.setOptions.apply(this._optionsManager,arguments)};var c={DEFAULTS:"defaults",EVENTS:"events"};s.extend=r,n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t){this._value=t,this._eventHandler=null}function o(){this._eventHandler||(this._eventHandler=new a)}function r(t){var e;if("object"==typeof t){e=t instanceof Array?[]:{};for(var i in t){var n=t[i];if("object"==typeof n&&null!==n)if(n instanceof Array){e[i]=[];for(var s=0;s<n.length;s++)e[i][s]=r(n[s])}else e[i]=r(n);else e[i]=n}}else e=t;return e}var a=i(9);s.patch=function(t,e){for(var i=new s(t),n=1;n<arguments.length;n++)i.patch(arguments[n]);return t},s.setOptions=function(t,e,i){i=i||r(t.constructor.DEFAULT_OPTIONS)||{};var n=new s(i);return t.setOptions=s.prototype.setOptions.bind(n),t.getOptions=s.prototype.getOptions.bind(n),e&&t.setOptions(e),n.get()},s.prototype.patch=function(t,e){var i=this._value;for(var n in t)n in i&&t[n]&&t[n].constructor===Object&&i[n]&&i[n].constructor===Object?(i.hasOwnProperty(n)||(i[n]=Object.create(i[n])),this.key(n).patch(t[n]),this._eventHandler&&this._eventHandler.emit("change",{key:n,value:this.key(n).value()})):this.set(n,t[n]);return this},s.prototype.setOptions=s.prototype.patch,s.prototype.key=function u(u){var t=new s(this._value[u]);return(!(t._value instanceof Object)||t._value instanceof Array)&&(t._value={}),t},s.prototype.get=function(t){return t?this._value[t]:this._value},s.prototype.getOptions=s.prototype.get,s.prototype.set=function(t,e){var i=this.get(t);return this._value[t]=e,this._eventHandler&&e!==i&&this._eventHandler.emit("change",{key:t,value:e}),this},s.prototype.on=function(t,e){o.call(this),a.prototype.on.apply(this._eventHandler,arguments)},s.prototype.off=function(t,e){o.call(this),a.prototype.off.apply(this._eventHandler,arguments)},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){n.exports={Surface:i(33),ContainerSurface:i(35),Context:i(36)}}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t){this.properties={},this.attributes={},this.content="",this.classList=[],this._contentDirty=!0,this._dirtyClasses=[],this._classesDirty=!0,this._stylesDirty=!0,this._attributesDirty=!0,this._dirty=!1,this._cachedSize=null,t?(t.el&&!t.size&&(this._contentDirty=!1,t.size=[!0,!0]),v.call(this,t.el),this.setOptions(t)):v.call(this)}function o(){!this._dirty&&this._currentTarget&&d.push(function(){var t=this._currentTarget;this._classesDirty&&(h.call(this,t),r.call(this,t)),this._stylesDirty&&a.call(this,t),this._attributesDirty&&u.call(this,t),this._contentDirty&&this.deploy(t),this._dirty=!1}.bind(this))}function r(t){for(var e=0;e<this.classList.length;e++)t.classList.add(this.classList[e]);this._classesDirty=!1}function a(t){for(var e in this.properties)t.style[e]=this.properties[e];this._stylesDirty=!1}function u(t){for(var e in this.attributes)t.setAttribute(e,this.attributes[e]);this._attributesDirty=!1}function h(t){for(var e=0;e<this._dirtyClasses.length;e++)t.classList.remove(this._dirtyClasses[e]);this._dirtyClasses=[]}function c(t){for(var e in this.properties)t.style[e]=""}function p(t){for(var e in this.attributes)t.removeAttribute(e)}function l(){this._currentTarget?this._currentTarget.addEventListener("touchmove",function(t){t.preventDefault()},!1):this.on("deploy",function(t){t.addEventListener("touchmove",function(t){t.preventDefault()},!1)}.bind(this))}function f(){this.addClass("samsara-scrollable")}var v=i(34),d=i(6),y="ontouchstart"in window;s.prototype=Object.create(v.prototype),s.prototype.constructor=s,s.prototype.elementType="div",s.prototype.elementClass="samsara-surface",s.prototype.setAttributes=function(t){for(var e in t){var i=t[e];void 0!=i&&(this.attributes[e]=t[e])}return this._attributesDirty=!0,o.call(this),this},s.prototype.getAttributes=function(){return this.attributes},s.prototype.setProperties=function(t){for(var e in t)this.properties[e]=t[e];return this._stylesDirty=!0,o.call(this),this},s.prototype.getProperties=function(){return this.properties},s.prototype.addClass=function(t){return this.classList.indexOf(t)<0&&(this.classList.push(t),this._classesDirty=!0,o.call(this)),this},s.prototype.removeClass=function(t){var e=this.classList.indexOf(t);e>=0&&(this._dirtyClasses.push(this.classList.splice(e,1)[0]),this._classesDirty=!0,o.call(this))},s.prototype.toggleClass=function(t){var e=this.classList.indexOf(t);-1==e?this.addClass(t):this.removeClass(t)},s.prototype.setClasses=function(t){for(var e=[],i=0;i<this.classList.length;i++)t.indexOf(this.classList[i])<0&&e.push(this.classList[i]);for(i=0;i<e.length;i++)this.removeClass(e[i]);for(i=0;i<t.length;i++)this.addClass(t[i]);return o.call(this),this},s.prototype.getClassList=function(){return this.classList},s.prototype.setContent=function(t){return this.content!==t&&(this.content=t,this._contentDirty=!0,o.call(this)),this},s.prototype.getContent=function(){return this.content},s.prototype.setOptions=function(t){void 0!==t.tagName&&(this.elementType=t.tagName),void 0!==t.opacity&&this.setOpacity(t.opacity),void 0!==t.size&&this.setSize(t.size),void 0!==t.origin&&this.setOrigin(t.origin),void 0!==t.proportions&&this.setProportions(t.proportions),void 0!==t.margins&&this.setMargins(t.margins),void 0!==t.classes&&this.setClasses(t.classes),void 0!==t.properties&&this.setProperties(t.properties),void 0!==t.attributes&&this.setAttributes(t.attributes),void 0!==t.content&&this.setContent(t.content),void 0!==t.aspectRatio&&this.setAspectRatio(t.aspectRatio),t.enableScroll?f.call(this):y&&l.call(this)},s.prototype.setup=function(t){var e=t.allocate(this.elementType);if(this.elementClass)if(this.elementClass instanceof Array)for(var i=0;i<this.elementClass.length;i++)this.addClass(this.elementClass[i]);else this.addClass(this.elementClass);this.attach(e),r.call(this,e),a.call(this,e),u.call(this,e),this.deploy(e)},s.prototype.remove=function(t){var e=this._currentTarget;this.recall(e),e.style.display="none",e.style.opacity="",e.style.width="",e.style.height="",c.call(this,e),p.call(this,e),h.call(this,e),this.detach(),t.deallocate(e)},s.prototype.deploy=function(t){if(t){var e=this.getContent();if(e instanceof Node){for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}else t.innerHTML=e;this._contentDirty=!1,this._eventOutput.emit("deploy",t)}},s.prototype.recall=function(t){this._eventOutput.emit("recall");for(var e=document.createDocumentFragment();t.hasChildNodes();)e.appendChild(t.firstChild);this.setContent(e)},s.prototype.getSize=function(){return this._cachedSpec.size||this._cachedSize},s.prototype.setSize=function(t){this._cachedSize=t,this._sizeNode.set({size:t}),o.call(this)},s.prototype.setProportions=function(t){this._sizeNode.set({proportions:t}),o.call(this)},s.prototype.setMargins=function(t){this._sizeNode.set({margins:t}),o.call(this)},s.prototype.setAspectRatio=function(t){this._sizeNode.set({aspectRatio:t}),o.call(this)},s.prototype.setOrigin=function(t){this._layoutNode.set({origin:t}),this._originDirty=!0,o.call(this)},s.prototype.setOpacity=function(t){this._layoutNode.set({opacity:t}),this._opacityDirty=!0,o.call(this)},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t){this._currentTarget=null,this._cachedSpec={transform:null,opacity:1,origin:null,size:null},this._eventOutput=new l,l.setOutputHandler(this,this._eventOutput),this._eventForwarder=function(t){this._eventOutput.emit(t.type,t)}.bind(this),this._sizeNode=new y,this._layoutNode=new _,this._size=new l,this._layout=new l,this.size=d.lift(function(t,e){return e?m(t,e):!1},[this._sizeNode,this._size]),this.layout=v.lift(function(t,e,i){return t&&i?e?g(e,t,i):t:!1},[this._layout,this._layoutNode,this.size]),this.layout.on("start",function(){if(!this._currentTarget){var t=this._getRoot();this.setup(t.allocator)}}.bind(this)),this.layout.on("update",c.bind(this)),this.layout.on("end",c.bind(this)),this.size.on("resize",function(t){if(!this._currentTarget){var e=this._getRoot();this.setup(e.allocator)}p.call(this,t)}.bind(this)),this._currentTarget=null,this._opacityDirty=!0,this._originDirty=!0,this._transformDirty=!0,this._isVisible=!0,t&&this.attach(t)}function o(t){for(var e in this._eventOutput.listeners)t.addEventListener(e,this._eventForwarder)}function r(t){for(var e in this._eventOutput.listeners)t.removeEventListener(e,this._eventForwarder)}function a(t){for(var e="matrix3d(",i=0;15>i;i++)Math.abs(t[i])<w&&(t[i]=0),e+=12===i||13===i?Math.round(t[i]*O)*I+",":t[i]+",";return e+t[15]+")"}function u(t){return 100*t[0]+"% "+100*t[1]+"%"}function h(t,e){return t&&e?t[0]!==e[0]||t[1]!==e[1]:t!==e}function c(t){var e=this._currentTarget;if(e){var i=this._cachedSpec,n=t.transform||f.identity,s=void 0===t.opacity?1:t.opacity,o=t.origin||E;this._transformDirty=f.notEquals(i.transform,n),this._opacityDirty=this._opacityDirty||i.opacity!==s,this._originDirty=this._originDirty||o&&h(i.origin,o),this._opacityDirty&&(i.opacity=s,z.call(this,e,s)),this._originDirty&&(i.origin=o,A(e,o)),this._transformDirty&&(i.transform=n,S(e,n)),this._originDirty=!1,this._transformDirty=!1,this._opacityDirty=!1}}function p(t){var e=this._currentTarget;e&&h(this._cachedSpec.size,t)&&(this._cachedSpec.size=t,D(e,t),this.emit("resize",t))}var l=i(9),f=i(21),v=i(15),d=i(18),y=i(17),_=i(8),m=i(29),g=i(28),b=!("transform"in document.documentElement.style),O=window.devicePixelRatio||1,I=1/O,T=1e-4,x=.9999,w=1e-5,E=[0,0],A=b?function(t,e){t.style.webkitTransformOrigin=u(e)}:function(t,e){t.style.transformOrigin=u(e)},S=b?function(t,e){t.style.webkitTransform=a(e)}:function(t,e){t.style.transform=a(e)},D=function(t,e){e[0]===!0?e[0]=t.offsetWidth:t.style.width=Math.ceil(e[0]*O)*I+"px",e[1]===!0?e[1]=t.offsetHeight:t.style.height=Math.ceil(e[1]*O)*I+"px"},z=function(t,e){!this._isVisible&&e>T&&(t.style.visibility="visible",this._isVisible=!0),e>x?e=x:T>e&&(e=T,this._isVisible&&(t.style.visibility="hidden",this._isVisible=!1)),this._isVisible&&(t.style.opacity=e)};s.prototype.on=function(t,e){this._currentTarget&&this._currentTarget.addEventListener(t,this._eventForwarder),l.prototype.on.apply(this._eventOutput,arguments)},s.prototype.off=function(t,e){l.prototype.off.apply(this._eventOutput,arguments)},s.prototype.emit=function(t,e){l.prototype.emit.apply(this._eventOutput,arguments)},s.prototype.attach=function(t){this._currentTarget=t,o.call(this,t)},s.prototype.detach=function(){var t=this._currentTarget;t&&(r.call(this,t),t.style.display=""),this._currentTarget=null},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t){o.call(this,t),this.context=new r,this.context._size.subscribe(this.size),this.on("deploy",function(){this.context.mount(this._currentTarget,!0)}.bind(this))}var o=i(33),r=i(36);s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.elementType="div",s.prototype.elementClass=["samsara-surface","samsara-container"],s.prototype.getPerspective=function(){return r.prototype.getPerspective.apply(this.context,arguments)},s.prototype.setPerspective=function(){r.prototype.setPerspective.apply(this.context,arguments)},s.prototype.add=function(){return r.prototype.add.apply(this.context,arguments)},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(){this._node=new a,this._size=new p,this._layout=new p,this.size=this._size.map(function(){var t=[this.container.clientWidth,this.container.clientHeight];return this.emit("resize",t),t}.bind(this)),this._node._size.subscribe(this.size),this._node._layout.subscribe(this._layout),this._perspective=new c,this._perspective.on("update",function(t){b(this.container,t)}.bind(this)),this._perspective.on("end",function(t){b(this.container,t)}.bind(this)),this._eventOutput=new l,this._eventForwarder=function(t){this._eventOutput.emit(t.type,t)}.bind(this)}function o(){this._size.emit("resize"),v.push(function(){this._size.emit("resize")}.bind(this))}var r=i(2),a=i(37),u=i(21),h=i(38),c=i(22),p=i(11),l=i(9),f=i(5),v=i(6),d="div",y="samsara-context",_=!1,m={transform:u.identity,opacity:1,origin:null,align:null,nextSizeTransform:u.identity};s.prototype.add=function(){return a.prototype.add.apply(this._node,arguments)},s.prototype.getPerspective=function(){return this._perspective.get()},s.prototype.setPerspective=function(t,e,i){this._perspective.set(t,e,i)},s.prototype.mount=function(t,e){this.container=t||document.createElement(d),this.container.classList.add(y);var i=new h(this.container);this._node.setAllocator(i),this.emit("deploy",this.container),t||document.body.appendChild(this.container),e||window.addEventListener("resize",o.bind(this),!1),f.push(function(){o.call(this),this._layout.trigger("start",m),v.push(function(){this._layout.trigger("end",m)}.bind(this))}.bind(this)),_||(_=!0,r.start())},s.prototype.on=function(t,e){this.container?this.container.addEventListener(t,this._eventForwarder):this._eventOutput.on("deploy",function(e){e.addEventListener(t,this._eventForwarder)}.bind(this)),l.prototype.on.apply(this._eventOutput,arguments)},s.prototype.off=function(t,e){l.prototype.off.apply(this._eventOutput,arguments)},s.prototype.emit=function(t,e){l.prototype.emit.apply(this._eventOutput,arguments)};var g=!("perspective"in document.documentElement.style),b=g?function(t,e){t.style.webkitPerspective=e?(0|e)+"px":"0px"}:function(t,e){t.style.perspective=e?(0|e)+"px":"0px"};n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t){o.call(this),this.root=this,t&&this.setAllocator(t)}var o=i(27);s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.setAllocator=function(t){this.allocator=t},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,i){function n(t){t||(t=document.createDocumentFragment()),this.container=t,this.detachedNodes={}}n.prototype.migrate=function(t){var e=this.container;if(t!==e){if(e instanceof DocumentFragment)t.appendChild(e);else for(;e.hasChildNodes();)t.appendChild(e.firstChild);this.container=t}},n.prototype.allocate=function(t){t=t.toLowerCase(),t in this.detachedNodes||(this.detachedNodes[t]=[]);var e,i=this.detachedNodes[t];return 0===i.length?(e=document.createElement(t),this.container.appendChild(e)):e=i.pop(),e},n.prototype.deallocate=function(t){var e=t.nodeName.toLowerCase(),i=this.detachedNodes[e];i.push(t)},i.exports=n}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){n.exports={EventEmitter:i(10),EventHandler:i(9),EventMapper:i(12),EventFilter:i(13),EventSplitter:i(14)}}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){n.exports={GenericInput:i(41),MouseInput:i(42),TouchInput:i(43),ScrollInput:i(45),ScaleInput:i(46),RotateInput:i(48),PinchInput:i(49)}}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t,e){this._eventInput=new r,this._eventOutput=new r,r.setInputHandler(this,this._eventInput),r.setOutputHandler(this,this._eventOutput),this._inputs={},t&&this.addInput(t),e&&this.setOptions(e)}function o(t,e){u[t]&&(this._inputs[t]=new u[t](e),this.subscribeInput(t))}var r=i(9),a=i(11),u={};s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.DIRECTION={X:0,Y:1},s.register=function(t){for(var e in t){if(u[e]){if(u[e]===t[e])return;throw new Error("this key is registered to a different input class")}u[e]=t[e]}},s.prototype.setOptions=function(t){for(var e in this._inputs)this._inputs[e].setOptions(t)},s.prototype.subscribeInput=function(t){var e=this._inputs[t];e.subscribe(this._eventInput),this._eventOutput.subscribe(e)},s.prototype.unsubscribeInput=function(t){var e=this._inputs[t];e.unsubscribe(this._eventInput),this._eventOutput.unsubscribe(e)},s.prototype.addInput=function(t){if(t instanceof Array)for(var e=0;e<t.length;e++)o.call(this,t[e]);else if(t instanceof Object)for(var i in t)o.call(this,i,t[i])},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t){this.options=c.setOptions(this,t),this._eventInput=new h,this._eventOutput=new h,h.setInputHandler(this,this._eventInput),h.setOutputHandler(this,this._eventOutput),this._eventInput.on("mousedown",o.bind(this)),this._eventInput.on("mousemove",r.bind(this)),this._eventInput.on("mouseup",a.bind(this)),this._eventInput.on("mouseleave",u.bind(this)),this._payload={delta:null,value:null,velocity:null,clientX:0,clientY:0,offsetX:0,offsetY:0},this._position=null,this._prevCoord=void 0,this._prevTime=void 0,this._down=!1,this._move=!1}function o(t){var e,i;t.preventDefault();var n=t.clientX,s=t.clientY;this._prevCoord=[n,s],this._prevTime=f(),this._down=!0,this._move=!1,void 0!==this.options.direction?(this._position=0,e=0,i=0):(this._position=[0,0],e=[0,0],i=[0,0]);var o=this._payload;o.delta=e,o.value=this._position,o.velocity=i,o.clientX=n,o.clientY=s,o.offsetX=t.offsetX,o.offsetY=t.offsetY,this._eventOutput.emit("start",o)}function r(t){if(!this._down)return!1;var e,i,n=this.options.scale,o=this._prevCoord,r=this._prevTime,a=t.clientX,u=t.clientY,h=f(),c=n*(a-o[0]),p=n*(u-o[1]),v=Math.max(h-r,l),d=1/v,y=c*d,_=p*d;this.options.direction===s.DIRECTION.X?(i=c,e=y,this._position+=i):this.options.direction===s.DIRECTION.Y?(i=p,e=_,this._position+=i):(i=[c,p],e=[y,_],this._position[0]+=i[0],this._position[1]+=i[1]);var m=this._payload;m.delta=i,m.value=this._position,m.velocity=e,m.clientX=a,m.clientY=u,m.offsetX=t.offsetX,m.offsetY=t.offsetY,this._eventOutput.emit("update",m),this._prevCoord=[a,u],this._prevTime=h,this._move=!0}function a(){return this._down?(this._eventOutput.emit("end",this._payload),this._prevCoord=void 0,this._prevTime=void 0,this._down=!1,void(this._move=!1)):!1}function u(t){if(this._down&&this._move){var e=r.bind(this),i=function(t){a.call(this,t),document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",i)}.bind(this,t);document.addEventListener("mousemove",e),document.addEventListener("mouseup",i)}}var h=i(9),c=i(31),p=i(11),l=8,f=Date.now;s.prototype=Object.create(p.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={direction:void 0,scale:1},s.DIRECTION={X:0,Y:1},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t){this.options=p.setOptions(this,t),this._eventOutput=new h,this._touchTracker=new u,h.setOutputHandler(this,this._eventOutput),h.setInputHandler(this,this._touchTracker),this._touchTracker.on("trackstart",o.bind(this)),this._touchTracker.on("trackmove",r.bind(this)),this._touchTracker.on("trackend",a.bind(this)),this._payload={delta:null,value:null,velocity:null,clientX:void 0,clientY:void 0,count:0,touch:void 0},this._position=null}function o(t){var e,i;void 0!==this.options.direction?(this._position=0,e=0,i=0):(this._position=[0,0],e=[0,0],i=[0,0]);var n=this._payload;n.delta=i,n.value=this._position,n.velocity=e,n.clientX=t.x,n.clientY=t.y,n.count=t.count,n.touch=t.identifier,this._eventOutput.emit("start",n)}function r(t){var e,i,n=this.options.scale,o=t.history,r=o[o.length-1],a=o[o.length-2],u=a.timestamp,h=r.timestamp,c=n*(r.x-a.x),p=n*(r.y-a.y),f=Math.max(h-u,l),v=1/f,d=c*v,y=p*v;this.options.direction===s.DIRECTION.X?(i=c,e=d,this._position+=c):this.options.direction===s.DIRECTION.Y?(i=p,e=y,this._position+=i):(i=[c,p],e=[d,y],this._position[0]+=i[0],this._position[1]+=i[1]);var _=this._payload;_.delta=i,_.velocity=e,_.value=this._position,_.clientX=t.x,_.clientY=t.y,_.count=t.count,_.touch=t.identifier,this._eventOutput.emit("update",_)}function a(t){this._payload.count=t.count,this._eventOutput.emit("end",this._payload)}var u=i(44),h=i(9),c=i(11),p=i(31),l=8;s.prototype=Object.create(c.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={direction:void 0,scale:1},s.DIRECTION={X:0,Y:1},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t){this.options=h.setOptions(this,t),this.touchHistory={},this._isTouched=!1,this._eventInput=new c,this._eventOutput=new c,c.setInputHandler(this,this._eventInput),c.setOutputHandler(this,this._eventOutput),this._eventInput.on("touchstart",r.bind(this)),this._eventInput.on("touchmove",a.bind(this)),this._eventInput.on("touchend",u.bind(this)),this._eventInput.on("touchcancel",u.bind(this))}function o(t,e,i){return{x:t.clientX,y:t.clientY,identifier:t.identifier,timestamp:p(),count:e.touches.length,history:i}}function r(t){if(!(t.touches.length>this.options.limit)){this._isTouched=!0;for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],n=o(i,t,null);this._eventOutput.emit("trackstart",n),this.touchHistory[i.identifier]||this.track(n)}}}function a(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],n=this.touchHistory[i.identifier];if(n){var s=o(i,t,n);this.touchHistory[i.identifier].push(s),this._eventOutput.emit("trackmove",s)}}}function u(t){if(this._isTouched){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],n=this.touchHistory[i.identifier];if(n){var s=o(i,t,n);this._eventOutput.emit("trackend",s),delete this.touchHistory[i.identifier]}}this._isTouched=!1}}var h=i(31),c=i(9),p=Date.now;s.DEFAULT_OPTIONS={limit:1},s.prototype.track=function(t){this.touchHistory[t.identifier]=[t]},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t){this.options=a.setOptions(this,t),this._payload={delta:null,value:null,velocity:null},this._eventInput=new r,this._eventOutput=new r,r.setInputHandler(this,this._eventInput),r.setOutputHandler(this,this._eventOutput),this._eventInput.on("mousewheel",o.bind(this)),this._eventInput.on("wheel",o.bind(this)),this._value=void 0===this.options.direction?[0,0]:0,this._prevTime=void 0,this._inProgress=!1;var e=this;this._scrollEnd=h.debounce(function(){e._inProgress=!1,e._eventOutput.emit("end",e._payload)},100)}function o(t){if(t.preventDefault(),!this._inProgress)return this._value=void 0===this.options.direction?[0,0]:0,v=this._payload,v.value=this._value,v.clientX=t.clientX,v.clientY=t.clientY,v.offsetX=t.offsetX,v.offsetY=t.offsetY,this._eventOutput.emit("start",v),void(this._inProgress=!0);var e=p(),i=this._prevTime||e,n=void 0!==t.wheelDeltaX?t.wheelDeltaX:-t.deltaX,o=void 0!==t.wheelDeltaY?t.wheelDeltaY:-t.deltaY,r=1/Math.max(e-i,c);this._prevTime=e;var a,u,h=n*r,l=o*r,f=this.options.scale;this.options.direction===s.DIRECTION.X?(u=f*n,a=f*h,this._value+=u):this.options.direction===s.DIRECTION.Y?(u=f*o,a=f*l,this._value+=u):(u=[f*n,f*o],a=[f*h,f*l],this._value[0]+=u[0],this._value[1]+=u[1]);var v=this._payload;v.delta=u,v.velocity=a,v.value=this._value,this._eventOutput.emit("update",v),this._scrollEnd()}var r=i(9),a=i(31),u=i(11),h=i(20),c=8;s.prototype=Object.create(u.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={direction:void 0,scale:1},s.DIRECTION={X:0,Y:1};var p=Date.now;n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t){o.call(this),this.options=r.setOptions(this,t),this._startDist=0,this._scaleFactor=1}var o=i(47),r=i(31);s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={scale:1},s.prototype._startUpdate=function(t){this._startDist=o.calculateDistance(this.posA,this.posB);var e=o.calculateCenter(this.posA,this.posB);this._eventOutput.emit("start",{count:t.touches.length,touches:[this.touchAId,this.touchBId],distance:this._startDist,center:e})},s.prototype._moveUpdate=function(t){var e=this.options.scale,i=o.calculateDistance(this.posA,this.posB),n=o.calculateCenter(this.posA,this.posB),s=(i-this._startDist)/this._startDist,r=Math.max(1+e*s,0),a=(r-this._scaleFactor)/t;this._eventOutput.emit("update",{delta:s,scale:r,velocity:a,distance:i,center:n,touches:[this.touchAId,this.touchBId]}),this._scaleFactor=r},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(){this._eventInput=new o,this._eventOutput=new o,o.setInputHandler(this,this._eventInput),o.setOutputHandler(this,this._eventOutput),this.touchAEnabled=!1,this.touchAId=0,this.posA=null,this.timestampA=0,this.touchBEnabled=!1,this.touchBId=0,this.posB=null,this.timestampB=0,this._eventInput.on("touchstart",this.handleStart.bind(this)),this._eventInput.on("touchmove",this.handleMove.bind(this)),this._eventInput.on("touchend",this.handleEnd.bind(this)),this._eventInput.on("touchcancel",this.handleEnd.bind(this))}var o=i(9),r=i(11),a=Date.now;s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.calculateAngle=function(t,e){var i=e[0]-t[0],n=e[1]-t[1];return Math.atan2(n,i)},s.calculateDistance=function(t,e){var i=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(i*i+n*n)},s.calculateCenter=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]},s.prototype.handleStart=function(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e];this.touchAEnabled?this.touchBEnabled||(this.touchBId=i.identifier,this.touchBEnabled=!0,this.posB=[i.pageX,i.pageY],this.timestampB=a(),this._startUpdate(t)):(this.touchAId=i.identifier,this.touchAEnabled=!0,this.posA=[i.pageX,i.pageY],this.timestampA=a())}},s.prototype.handleMove=function(t){if(this.touchAEnabled&&this.touchBEnabled){for(var e,i=this.timestampA,n=this.timestampB,s=0;s<t.changedTouches.length;s++){var o=t.changedTouches[s];o.identifier===this.touchAId?(this.posA=[o.pageX,o.pageY],this.timestampA=a(),e=this.timestampA-i):o.identifier===this.touchBId&&(this.posB=[o.pageX,o.pageY],this.timestampB=a(),e=this.timestampB-n)}e&&this._moveUpdate(e)}},s.prototype.handleEnd=function(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e];(i.identifier===this.touchAId||i.identifier===this.touchBId)&&(this.touchAEnabled&&this.touchBEnabled&&this._eventOutput.emit("end",{touches:[this.touchAId,this.touchBId],angle:this._angle}),this.touchAEnabled=!1,this.touchAId=0,this.touchBEnabled=!1,this.touchBId=0)}},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t){o.call(this),this.options=r.setOptions(this,t),this._angle=0,this._previousAngle=0}var o=i(47),r=i(31);s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={scale:1},s.prototype._startUpdate=function(t){this._previousAngle=o.calculateAngle(this.posA,this.posB);var e=o.calculateCenter(this.posA,this.posB);this._angle=0,this._eventOutput.emit("start",{count:t.touches.length,value:this._angle,center:e,touches:[this.touchAId,this.touchBId]})},s.prototype._moveUpdate=function(t){var e=this.options.scale,i=o.calculateAngle(this.posA,this.posB),n=o.calculateCenter(this.posA,this.posB),s=e*(i-this._previousAngle),r=s/t;this._angle+=s,this._eventOutput.emit("update",{delta:s,velocity:r,value:this._angle,center:n,touches:[this.touchAId,this.touchBId]}),this._previousAngle=i},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t){o.call(this),this.options=r.setOptions(this,t),this._displacement=0,this._previousDistance=0}var o=i(47),r=i(31);s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={scale:1},s.prototype._startUpdate=function(t){var e=o.calculateCenter(this.posA,this.posB);this._previousDistance=o.calculateDistance(this.posA,this.posB),this._displacement=0,this._eventOutput.emit("start",{count:t.touches.length,touches:[this.touchAId,this.touchBId],value:this._previousDistance,center:e})},s.prototype._moveUpdate=function(t){var e=o.calculateDistance(this.posA,this.posB),i=o.calculateCenter(this.posA,this.posB),n=this.options.scale,s=n*(e-this._previousDistance),r=s/t;this._displacement+=s,this._eventOutput.emit("update",{delta:s,velocity:r,value:e,displacement:this._displacement,center:i,touches:[this.touchAId,this.touchBId]}),this._previousDistance=e},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){n.exports={DrawerLayout:i(51),FlexibleLayout:i(54),GridLayout:i(55),SequentialLayout:i(56),Scrollview:i(57)}}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t){var e=d.SIDE,i=d.DIRECTION;return t===e.LEFT||t===e.RIGHT?i.X:i.Y}function o(t){var e=d.SIDE;return t===e.LEFT||t===e.TOP?d.ORIENTATION.POSITIVE:d.ORIENTATION.NEGATIVE}function r(t){var e=t.key,i=t.value;"side"!==e&&(this.direction=s(i),this.orientation=o(i)),this.options.revealLength*=this.direction}var a=i(21),u=i(22),h=i(26),c=i(8),p=i(15),l=i(52),f=i(53),v=i(12),d={DIRECTION:{X:0,Y:1},SIDE:{LEFT:0,TOP:1,RIGHT:2,BOTTOM:3},ORIENTATION:{POSITIVE:1,NEGATIVE:-1}},y=h.extend({defaults:{side:d.SIDE.LEFT,revealLength:void 0,velocityThreshold:1/0,positionThreshold:0,transitionOpen:!0,transitionClose:!0},events:{change:r},initialize:function(t){this.direction=s(t.side),this.orientation=o(t.side),this.options.revealLength*=this.orientation,this.isOpen=!1,this.transitionStream=new u(0);var e=new p({start:function(){return this.transitionStream.halt(),0}.bind(this),update:function(e){var i=e.delta,n=i,s=t.revealLength,o=this.position.get(),r=o+i,a=0,u=0;return this.orientation===d.ORIENTATION.POSITIVE?u=s:a=s,(r>=u||a>=r)&&(n=r>u&&r>a&&o!==u?u-o:a>r&&o!==a?a-o:0),n}.bind(this),end:function(e){var i=e.velocity,n=this.orientation,s=this.position.get(),o=t.revealLength,r=n*o,a=t.positionThreshold||r/2,u=t.velocityThreshold;if(0===s)return this.isOpen=!1,!1;if(s===r)return this.isOpen=!0,!1;var h=s>=a&&(i>-u||i>u)||a>s&&i>u;h?(this.options.transitionOpen.velocity=i,this.open(this.options.transitionOpen,function(){this.options.transitionOpen.velocity=0}.bind(this))):(this.options.transitionClose.velocity=i,this.close(this.options.transitionClose,function(){this.options.transitionClose.velocity=0}.bind(this)))}.bind(this)});e.subscribe(this.input);var i=new l;i.subscribe(this.transitionStream),this.position=new f(0),this.position.subscribe(e),this.position.subscribe(i);var n=new v(function(t){return{value:t,progress:t/this.options.revealLength}}.bind(this));this.output.subscribe(n).subscribe(this.position)},addDrawer:function(t){void 0==this.options.revealLength&&(this.options.revealLength=t.getSize()[this.direction]),this.drawer=t;var e=new c({transform:a.behind});this.add(e).add(this.drawer)},addContent:function(t){var e=this.position.map(function(t){return this.direction===d.DIRECTION.X?a.translateX(t):a.translateY(t)}.bind(this)),i=new c({transform:e});this.add(i).add(t)},open:function(t,e){void 0===t&&(t=this.options.transitionOpen),this.setPosition(this.options.revealLength,t,e),this.isOpen||(this.isOpen=!0,this.emit("open"))},close:function(t,e){void 0===t&&(t=this.options.transitionClose),this.setPosition(0,t,e),this.isOpen&&(this.isOpen=!1,this.emit("close"))},toggle:function(t){this.isOpen?this.close(t):this.open(t)},setPosition:function(t,e,i){this.transitionStream.reset(this.position.get()),this.transitionStream.set(t,e,i)},reset:function(t){this.isOpen?this.open(t):this.close(t)}},d);n.exports=y}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t){this.options=r.setOptions(this,t);var e=void 0,i=void 0;o.call(this,{update:function(){return i}}),this._eventInput.on("start",function(t){e=t}),this._eventInput.on("update",function(t){var n=this.options.scale;if(e instanceof Array){
i=[];for(var s=0;s<e.length;s++)i[s]=n*(t[s]-e[s])}else i=n*(t-e);e=t}.bind(this))}var o=i(15),r=i(31);s.DEFAULT_OPTIONS={scale:1},s.prototype=Object.create(o.prototype),s.prototype.constructor=s,n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t,e){this.options=r.setOptions(this,e),this.sum=void 0,void 0!==t&&this.set(t),a.call(this,{start:function(){return this.sum||0}.bind(this),update:function(){return this.sum}.bind(this),end:function(){return this.sum||0}.bind(this)}),this._eventInput.on("start",function(t){if(void 0===this.sum)if(t instanceof Array){this.sum=[];for(var e=0;e<t.length;e++)this.sum[e]=o(t[e],this.options.min,this.options.max)}else this.sum=o(t,this.options.min,this.options.max)}.bind(this)),this._eventInput.on("update",function(t){if(t instanceof Array)for(var e=0;e<t.length;e++)this.sum[e]+=t[e],this.sum[e]=o(this.sum[e],this.options.min,this.options.max);else this.sum+=t,this.sum=o(this.sum,this.options.min,this.options.max)}.bind(this))}function o(t,e,i){return Math.min(Math.max(t,e),i)}var r=i(31),a=i(15),u=i(5),h=i(6);s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={min:-(1/0),max:1/0},s.prototype.set=function(t,e){if(this.sum=t,e!==!0){var i=this;u.push(function(){i.trigger("start",t),h.push(function(){i.trigger("end",t)})})}},s.prototype.get=function(){return this.sum},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var s=i(21),o=i(22),r=i(26),a=i(15),u=i(8),h=i(17),c={DIRECTION:{X:0,Y:1}},p=r.extend({defaults:{direction:c.DIRECTION.X,ratios:[]},initialize:function(t){var e=t.ratios instanceof o?t.ratios:new o(t.ratios);this.nodes=[];var i=a.lift(function(e,i){for(var n=t.direction,o=i[n],r=0,a=0;a<e.length;a++){var u=e[a],h=this.nodes[a];"number"!=typeof u?o-=h.getSize()[n]||0:r+=u}for(var p=0,l=[],f=[],a=0;a<e.length;a++){h=this.nodes[a],u=e[a];var v="number"==typeof u?o*u/r:h.getSize()[n],d=n==c.DIRECTION.X?s.translateX(p):s.translateY(p),y=n==c.DIRECTION.X?[v,void 0]:[void 0,v];f.push(y),l.push(d),p+=v}return{transforms:l,sizes:f}}.bind(this),[e,this.size]);this.transforms=i.pluck("transforms"),this.sizes=i.pluck("sizes")},addItems:function(t){this.nodes=t;for(var e=0;e<this.nodes.length;e++){var i=this.nodes[e],n=new u({transform:this.transforms.pluck(e)}),s=new h({size:this.sizes.pluck(e)});this.add(n).add(s).add(i)}}},c);n.exports=p}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t,e){for(var i in t)if(e<=parseInt(i))break;return t[i]}var o=i(21),r=i(26),a=i(15),u=i(8),h=i(17),c=i(22),p=r.extend({defaults:{itemsPerRow:[],gutter:0},events:{},initialize:function(t){var e=t.gutter instanceof c?t.gutter:new c(t.gutter);this.stream=a.lift(function(e,i){if(!e)return!1;for(var n=e[0],o=e[1],r=t.itemsPerRow instanceof Array?t.itemsPerRow:s(t.itemsPerRow,n),a=r.length,u=(o-(a-1)*i)/a,h=[],c=[],p=0,l=0;a>l;l++){for(var f=r[l],v=(n-(f-1)*i)/f,d=0,y=0;f>y;y++){var e=[v,u];h.push(e),c.push([d,p]),d+=v+i}p+=u+i}return{sizes:h,positions:c}},[this.size,e])},addItems:function(t){for(var e=this.stream.pluck("sizes"),i=this.stream.pluck("positions"),n=0;n<t.length;n++){var s=t[n],r=e.pluck(n),a=i.pluck(n),c=a.map(function(t){return o.translate(t)}),r=new h({size:r}),p=new u({transform:c});this.add(r).add(p).add(s)}}});n.exports=p}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var s=i(21),o=i(26),r=i(18),a=i(8),u={DIRECTION:{X:0,Y:1}},h=o.extend({defaults:{direction:u.DIRECTION.X,spacing:0},initialize:function(){},addItems:function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i].size);var n=r.lift(function(){for(var t=arguments,e=this.options.direction,i=[],n=0,o=0;o<t.length;o++){var r=t[o],a=e===u.DIRECTION.X?s.translateX(n):s.translateY(n);i.push(a),n+=r[e]+this.options.spacing}return{transforms:i,length:n}}.bind(this),e),o=n.pluck("transforms"),h=n.pluck("length");this.output.subscribe(h);for(var i=0;i<t.length;i++){var c=t[i],p=o.pluck(i),l=new a({transform:p});this.add(l).add(c)}}},u);n.exports=h}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function s(t){console.log(t,this._previousIndex),t!=this._previousIndex&&(this.output.emit("page",t),this._previousIndex=t)}var o=i(21),r=i(22),a=i(26),u=i(8),h=i(15),c=i(18),p=i(53),l=i(52),f=i(56),v=i(35),d=i(41),y=i(45),_=i(43);d.register({touch:_,scroll:y});var m={DIRECTION:{X:0,Y:1}},g=a.extend({defaults:{direction:m.DIRECTION.Y,pageTransition:!1},initialize:function(t){this._currentIndex=0,this._previousIndex=0,this.itemOffset=0,this.items=[],this.layout=new f({direction:t.direction});var e=new d(["touch","scroll"],{direction:t.direction}),i=new p(0);this.drag=new r(0),this.spring=new r(0);var n=new l,a=new l,y=e.pluck("delta");n.subscribe(this.drag),a.subscribe(this.spring),i.subscribe(y),i.subscribe(n),t.pageTransition&&(e.on("end",function(e){g&&(this.drag.reset(0),this.spring.reset(0),t.pageTransition.velocity=e.velocity+this.drag.getVelocity(),this.drag.set(0,t.pageTransition))}.bind(this)),e.on("start",function(){this.drag.halt(),this.spring.halt()}.bind(this)),this.spring.on("start",function(){this.drag.velocity=0}.bind(this)),this.spring.on("end",function(){s.call(this,this._currentIndex)}.bind(this))),this.drag.on("end",function(t){this.spring.set(this.itemOffset,{curve:"spring",period:70,damping:.7,velocity:t.velocity})}.bind(this));var _=c.lift(function(e,i){return e?i[t.direction]-e:!1},[this.layout,this.size]),g=!0;this.offset=h.lift(function(t,e){return g=!0,e?this.drag.isActive()||this.spring.isActive()?Math.round(t):e>=t?(g=!1,i.set(e,!0),s.call(this,this._currentIndex),e):t>=0?(g=!1,i.set(0,!0),s.call(this,this._currentIndex),0):Math.round(t):!1}.bind(this),[i,_]);var b=new u({transform:this.offset.map(function(e){return t.direction==m.DIRECTION.Y?o.translateY(e):o.translateX(e)})}),O=new v({properties:{overflow:"hidden"}});e.subscribe(O),O.add(b).add(this.layout),this.add(O)},"goto":function(t,e,i){e=e||this.options.transition;var n=this.itemOffset;if(t>this._currentIndex)for(var s=this._currentIndex;t>s;s++)n-=this.items[s].getSize()[this.options.direction];else{if(!(t<this._currentIndex))return;for(var s=this._currentIndex;s>t;s--)n+=this.items[s].getSize()[this.options.direction]}this.spring.set(0),this.spring.set(Math.ceil(n),e,i)},addItems:function(t){this.layout.addItems(t),this.items=t;for(var e=[this.offset],i=0;i<t.length;i++)e.push(t[i].size);var n=0,s=h.lift(function(){if(void 0===arguments[1])return!1;var t=arguments[0],e=this.options.direction,i=this._currentIndex,s=arguments[i+1];if(!s)return!1;var o=0,r=-t-n,a=s[e];if(r>=a)this._currentIndex++,o=0,n+=a;else if(0>r){if(0==this._currentIndex)return!1;this._currentIndex--,o=1,a=arguments[this._currentIndex+1][e],n-=a}else o=r/a;return this.itemOffset=a/2>r?r:r-a,{index:this._currentIndex,progress:o}}.bind(this),e);this.output.subscribe(s),s.on("start",function(t){}.bind(this)),s.on("update",function(t){}.bind(this)),s.on("end",function(t){}.bind(this))}});n.exports=g}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){n.exports={Accumulator:i(53),Differential:i(52),SimpleStream:i(11),Stream:i(15),Observable:i(16),SizeObservable:i(19)}}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){n.exports={Tween:i(23),Spring:i(24),Inertia:i(25)}}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))}])});